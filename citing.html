<!DOCTYPE HTML>
<html>
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-131004314-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-131004314-1');
    </script>

    <title>The ASPECT mantle convection code: How to cite?</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="icon" href="/favicon.ico"/>
    <link rel="apple-touch-icon" href="/pictures/clover57.png"/>
    <meta name="author" content="the deal.II authors"/>
    <meta name="keywords" content="mantle convection, dealii, finite elements, finite element method, fem, finite element software, open source, adaptive, finite element method, finite element modeling, finite element modelling, finite element methods, numerical analysis, numerical analysis software, computational fluid dynamics software"/>
    <meta name="robots" content="index, follow">

    <!-- Include stylesheets -->
    <link href="css/bootstrap.min.css" type="text/css" rel="stylesheet"/>
    <link href="css/global.less" type="text/less" rel="stylesheet"/>
    <link href="css/index.less" type="text/less" rel="stylesheet"/>

    <!-- LESS needs to come after the stylesheets -->
    <script src="js/less-1.4.1.min.js"></script>

    <style type="text/css">
      .box {
      background: #E0E0E0;
      font-family: monospace;
      width: 100%;
      padding: 10px;
      word-wrap: break-word;
      }

      .editbox {
      background-color: #39a851;
      width: 100%;
      padding: 10px;
      }
    </style>
  </head>

  <body>

    <!--#include file="header.include" -->

    <div id="content" class="container">
      <div class="row">
        <div class="well">
          <p>
            As in many open source projects, the many authors of ASPECT
            have spent weeks, months, or years of their academic lives
            contributing to the development of this code. Consequently,
            publications based on ASPECT should cite the relevant papers
            that describe the intellectual contributions that have
            flown into ASPECT.
          </p>

          <p>
            This page helps you in determining which papers to cite.
          </p>
        </div>
      </div>

      <div class="row">
        <div class="well">

          <script src="database.js?t=2020-06-30"></script>

          <script type="text/javascript">
            var checkboxes = ["fs", "melt", "particles", "dg", "mf", "pda", "geoid", "NewtonSolver", "GWB"];

            var intext = "Computations were done using the ASPECT code version <i>VERSION</i>, see \n\\cite{CITEKEYS}.";

            var thanks = "We thank the Computational Infrastructure for Geodynamics (geodynamics.org) which is funded by the National Science Foundation under award EAR-0949446 and EAR-1550901 for supporting the development of ASPECT.";
          </script>

          <br />

          <div class="well well-sm">
            <h3>Step 1: Select among the features your ASPECT runs use</h3>

            <form action="" class="editbox">
              <label>Version: <select id="ver" onchange="update()">
                  <option value="dev">dev</option>
                  <option value="2.2.0">2.2.0</option>
                  <option value="2.1.0">2.1.0</option>
                  <option value="2.0.1">2.0.1</option>
                  <option value="2.0.0">2.0.0</option>
                  <option value="1.5.0">1.5.0</option>
                  <option value="1.4.0">1.4.0</option>
              </select></label>
              <br/><br/>
              <label><input type="checkbox" id="fs" onchange="update()">Free Surface</label>
              <label><input type="checkbox" id="melt" onchange="update()">Melt Transport</label>
              <label><input type="checkbox" id="particles" onchange="update()">Particles</label>
              <label><input type="checkbox" id="dg" onchange="update()">DG advection</label>
              <label><input type="checkbox" id="mf" onchange="update()">matrix-free solvers</label>
              <label><input type="checkbox" id="pda" onchange="update()">Projected Density Approximation</label>
              <label><input type="checkbox" id="geoid" onchange="update()">Geoid</label>
              <label><input type="checkbox" id="NewtonSolver" onchange="update()">Newton solver</label>
              <label><input type="checkbox" id="GWB" onchange="update()">WorldBuilder</label>
              &nbsp;&nbsp;&nbsp;
              <label><input type="checkbox" id="checkall" onchange="do_checkall()">(check all)</label>
              <br/>
            </form>

          </div>

          <div class="well well-sm">
            <h3>Step 2: Use the following text within your publications to cite ASPECT</h3>
            <div id="intext" class="box"></div>
          </div>

          <div class="well well-sm">
            <h3>Step 3: Use the following text in your "Acknowledgements"</h3>
            <div id="thanks" class="box"></div>
          </div>

          <div class="well well-sm">
            <h3>Step 4: Add the following papers to your list of references</h3>
            <p>
              The following paper describe all aspects of the methods
              you used in your ASPECT runs, using your selection of
              features above.
              The canonical reference for ASPECT is the first publication listed here, but please consider citing
              all the references below:
            </p>
            <div id="paper" class="box"></div>

            <br/>
            <p>The bibtex data for these papers is as follows:</p>
            <div id="bibtex" class="box"></div>
	  </div>

	  <div class="well well-sm">
            <p class="note">A link with your selection is available at:<br/>
              <a id="onlineurl" href="https://aspect.geodynamics.org/citing.html">https://aspect.geodynamics.org/citing.html</a>
            </p>
	  </div>

          <script type="text/javascript">
        function do_checkall() {
            var all = document.getElementById("checkall").checked ? true : false;
            for (var i = 0; i < checkboxes.length; ++i)
                document.getElementById(checkboxes[i]).checked = all;
            update();
        }

        function update() {
            var selected_groups = ["main"];
            var urlstuff = [];
            var version = document.getElementById('ver').value;
            urlstuff.push("ver="+version);
            selected_groups.push(version);
            for (var i = 0; i < checkboxes.length; ++i)
                if (document.getElementById(checkboxes[i]).checked)
                {
                    selected_groups.push(checkboxes[i]);
                    urlstuff.push(checkboxes[i] + '=1');
                }

            var keys = [];
            var txt = "";
            var bibtxt = "";


            for (var i = 0; i < selected_groups.length; ++i) {
               for (var papername in papers) {
                var paper = papers[papername];
                if (paper.group!=selected_groups[i])
                    continue;

                txt += paper.text + "<br/><br/>";
                bibtxt += paper.bibtex + "\n\n";
                keys.push(paper.bibtexkey);
                }
            }

            document.getElementById('intext').innerHTML = intext.replace("CITEKEYS", keys.join(",")).replace("VERSION",version);
            document.getElementById('thanks').innerHTML = thanks;
            document.getElementById('paper').innerHTML = txt.replace(/\n/g, "\n<br/>");
            document.getElementById('bibtex').innerHTML = "<pre><code>"+bibtxt+"</code></pre>";

            var params = urlstuff.join('&');
            if (params.length>0) params="?"+params;
            var url = "https://aspect.geodynamics.org/citing.html" + params;
            document.getElementById('onlineurl').innerText = url;
            document.getElementById('onlineurl').href = url;
        }

        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        function autorun() {
            for (var i = 0; i < checkboxes.length; ++i)
            {
              if (getParameterByName(checkboxes[i]) == "1")
                document.getElementById(checkboxes[i]).checked = true;
            }

            var version = getParameterByName("ver");
            if (version)
                document.getElementById('ver').value = version;
            if (document.getElementById('ver').selectedIndex==-1)
                document.getElementById('ver').selectedIndex = 1; // latest release
            update();
        }

        if (document.addEventListener) document.addEventListener("DOMContentLoaded", autorun, false);
        else if (document.attachEvent) document.attachEvent("onreadystatechange", autorun);
        else window.onload = autorun;
            </script>
	</div>
      </div>
    </div>
  </body>

  <!-- Some JQuery needs to come after the body -->
  <script src="js/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/accordion.js"></script>
</html>
